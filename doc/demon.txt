# Creating a demon process

# Scott provided a link to a shell script which handles making the ruby script a demon (with some tweaking)
http://articles.slicehost.com/2009/3/4/ubuntu-intrepid-adding-an-nginx-init-script

# see ocpdaemon

# to install
# create in /etc/init.d

# make executable
sudo chmod 755 ocpdaemon

# test
./ocpdaemon start
./ocpdaemon stop
./ocpdaemon restart

# install
sudo update-rc.d ocpdaemon defaults 98 02

# to remove
./ocpdaemon stop
sudo update-rc.d -f ocpdaemon remove 


# Error
2010-03-08 06:18:55|init_modem|sleeping for 10 seconds
2010-03-08 06:19:05|Gsm::Modem|error instantiating modem: Permission denied - rubygsm.ttyS0.2010-03-08.06-19-05
2010-03-08 06:19:05|init_modem|sleeping for 10 seconds
2010-03-08 06:19:15|Gsm::Modem|error instantiating modem: Permission denied - rubygsm.ttyS0.2010-03-08.06-19-15



# Additional resources, not currently used


# Ruby Daemon
sudo gem install daemons

# Ubuntu = debian
http://www.debian.org/doc/FAQ/ch-customizing.en.html

## MUST Start AFTERSERIAL PORT
## Just a matter of setting it's priority very late (i.e. 98 or 99)


# Other resources
http://stackoverflow.com/questions/1740308/create-a-daemon-with-double-fork-in-ruby
http://blog.rapleaf.com/dev/?p=19

http://blog.rapleaf.com/dev/?p=19
Making sure Ruby Demons die

